this.Rou=function(){var e={},t=function(t){return e[t]},n=function(n,r,i){var s={exports:{}};i.apply(this,[t,s.exports,s].concat(r.slice(3).map(function(t){return e[t]}))),e["./"+n]=s.exports};return n("matchers/method",["require","exports","module"],function(e,t,n){function r(e){if(!e.method)throw"method expected";this._method=e.method.toLowerCase()}r.prototype={match:function(e){return e.method?this._method===e.method.toLowerCase():!1}},n.exports=r}),n("matchers/param",["require","exports","module"],function(e,t,n){function r(e){this._name=e.name,this._cond=e.cond}r.prototype={match:function(e){return typeof this._cond=="undefined"?this.match=function(e){return typeof e.query[this._name]!="undefined"}:this._cond===Number?(this._cond=RegExp("^\\d+$"),this.match=function(e){return this._cond.test(e.query[this._name])}):this._cond instanceof RegExp?this.match=function(e){return this._cond.test(e.query[this._name])}:typeof this._cond=="function"?this.match=function(e){return!!this._cond(e.query[this._name])}:this.match=function(e){return this._cond==e.query[this._name]},this.match(e)}},n.exports=r}),n("matchers/custom",["require","exports","module"],function(e,t,n){function r(e){this._fn=e.fn}r.prototype={match:function(e){return(this.match=this._fn)(e)}},n.exports=r}),n("matcher",["require","exports","module","./matchers/method","./matchers/param","./matchers/custom"],function(e,t,n){var r={method:e("./matchers/method"),param:e("./matchers/param"),custom:e("./matchers/custom")};n.exports=function(e,t){return new r[e](t)}}),n("rule",["require","exports","module","./matcher"],function(e,t,n){function i(e,t){this._router=e,this._cb=null,this._paramsToMatch=[];var t=t.replace(/\{([^}]+)\}/g,function(e,t){return this._paramsToMatch.push(t),"([^/]+)"}.bind(this));this._urlRe=RegExp("^"+this._normalizePath(t)+"$"),this._matchers=[]}var r=e("./matcher");i.prototype={method:function(e){return this._matchers.push(r("method",{method:e})),this},param:function(e,t){return this._matchers.push(r("param",{name:e,cond:t})),this},match:function(e){return this._matchers.push(r("custom",{fn:e})),this},done:function(e){return this._cb=e,this._router},_match:function(e){var t=this._urlRe.exec(this._normalizePath(e.path));if(!t)return null;var n=e.query;e.query=this._mergeParams(t.slice(1),e.query);var r,i=0;while(r=this._matchers[i++])if(!r.match(e))return e.query=n,null;return e},_mergeParams:function(e,t){var n={},r,i=0;while(r=this._paramsToMatch[i])n[r]=e[i++];if(t)for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);return n},_normalizePath:function(e){var t=e.trim();return t.charAt(0)!=="/"&&(t="/"+t),t.charAt(t.length-1)!=="/"&&(t+="/"),t},_apply:function(e){if(!this._cb)throw"undefined callback";this._cb(e)}},n.exports=i}),n("router",["require","exports","module","./rule"],function(e,t,n){var r=e("./rule"),i=function(){this._routes=[],this._rewrites=[]};i.prototype={add:function(){var e=arguments;return typeof e[1]=="string"?this._addRewrite(e[0],e[1]):this._addRoute(e[0])},route:function(e){var t,n,r=0;while(t=this._routes[r++])if(n=t._match(e))return t._apply(n),!0;return!1},_addRoute:function(e){var t=new r(this,e);return this._routes.push(t),t},_addRewrite:function(e){}},n.exports=function(){return new i}}),t("./router")}();